<div class="cp-assessment-questions">
  <section class="container">
    <ss-info-box ng-hide="vm.hasFlash">
      <p translate>info.missing_flash_warning_assessments</p>
      <a ui-sref="application.home" class="btn">Explore Staying Sharp</a>
    </ss-info-box>

    <div ng-if="vm.showAssessment" class="form-wrap">
      <h1>The Brain Health Assessment</h1>

      <form name="assessmentForm" novalidate ng-submit="vm.submitForm(assessmentForm.$valid)">

        <h4>The Basics About You:</h4>

        <p class="required-text"><small>All fields required</small></p>

        <div ng-repeat="question in vm.questions" class="row">
          <!-- date picker -->
          <div class="form-input-wrap col-6"
               ng-if="question.type === 'AssessmentQuestionDate'"
               ng-class="{error: assessmentForm.$submitted && assessmentForm[question.id].$error.required}">
            <label>{{question.text}}</label>
            <ng-combo-date-picker
              ng-model="vm.textResponses[question.id]"
              ng-date="{{ vm.defaultBirthdate.toString() }}"
              ng-attrs-date='{"class": "form-control day"}'
              ng-attrs-month='{"class": "form-control month"}'
              ng-attrs-year='{"class": "form-control year"}'
              class="date-picker"
              name="{{question.id}}">
            </ng-combo-date-picker>
          </div>
          <!-- select -->
          <div class="form-input-wrap select-wrap col-6"
               ng-if="question.type === 'AssessmentQuestionSelect'"
               ng-class="{error: assessmentForm.$submitted && assessmentForm[question.id].$error.required}">
            <label>{{question.text}}</label>
            <select class="form-control" name="{{question.id}}" ng-model="vm.textResponses[question.id]" required>
              <option ng-repeat="option in question.answerOptions" value="{{option}}">{{option}}</option>
            </select>
          </div>
          <!-- radio buttons -->
          <div class="form-input-wrap radio-wrap"
               ng-if="question.type === 'AssessmentQuestionRadio'"
               ng-class="{error: assessmentForm.$submitted && assessmentForm[question.id].$error.required}">
            <p class="question-text">{{question.text}}</p>
            <div ng-repeat="option in question.answerOptions" class="radio inline">
              <div ng-if="question.answerValues.length === 0">
                <label>
                  <input name="{{question.id}}" value="{{option}}" ng-model="vm.textResponses[question.id]" type="radio" required>{{option}}
                </label>
              </div>
              <div ng-if="question.answerValues.length > 0">
                <label>
                  <input name="{{question.id}}" value="{{option}}" ng-model="vm[question.id]" ng-click="vm.indexResponses[question.id]=$index" type="radio" required>{{option}}
                </label>
              </div>
            </div>
          </div>
        </div><!-- end ng-repeat -->
        <br>
        <button type="submit">{{vm.submitButtonText}}</button>
      </form>
    </div>
  </section>
</div>
