<ss-update-meta
  ss-title="{{vm.article.seoTitle}}"
  ss-description="{{vm.article.seoDescription}}"
  ss-keywords="{{vm.article.keywords}}"
  ss-robots="{{vm.article.robots}}"
  ss-canonical-url="{{vm.article.canonicalUrl}}">
</ss-update-meta>

<div id="article-container">
  <div class="cp-lead-in-detail article">
    <div ng-class="{'non-paid-bg-image': !$root.$currentUser.isPaid(), 'paid-bg-image': $root.$currentUser.isPaid()}"
         ng-style="{'background-image':'url(' + vm.article.mastHeadImage + ')'}">
    </div>
    <div id="sticky-container">
      <div class="container">
        <section>
          <div class="article-info-block info-block">
            <header>
              <h5>Article</h5>
            </header>
            <article>
              <h2 class="ellipsis">
                <a href="#link-to-card-content">{{vm.article.mastHeadTitle}}</a>
              </h2>
            </article>
            <div class="pillars">
              <div ss-pillars-display="vm.article.pillars"></div>
            </div>
          </div>
          <div class="cp-article-partner" ng-show="vm.article.contentSourceBrandingImage">
            <div class="left">
              <!-- TODO: Text for article partner -->
              <p>An Article from our partner:</p>
            </div>
            <div class="right">
              <!-- TODO: Image/logo for article partner -->
              <img ng-src="{{vm.article.contentSourceBrandingImage}}" alt="">
            </div>
            <hr>
          </div>
          <div class="cp-content-detail">
            <div style='width: 100%;'>
                <ss-square-ad adslot="aarp-ad-300x250" ng-if="$root.showMobileAd()"></ss-square-ad>
            </div>
            <article>
              <div class="detail-text" ng-bind-html="vm.article.section1Body"></div>
              <ss-video-iframe ng-if="vm.article.videoId" ss-video-id="vm.article.videoId"></ss-video-iframe>
              <img ng-if="vm.article.bodyImage" class="detail-image" ng-src="{{vm.getBodyImage()}}" alt="{{vm.getBodyImageDescription()}}">
              <div ng-if="vm.article.bodyImage && vm.article.section2Body" ng-bind-html="vm.article.section2Body"></div>
              <hr>
              <div ng-if="vm.article.sourceMaterialsCitation">
                <div class="detail-source" ng-bind-html="vm.article.sourceMaterialsCitation"></div>
                <hr>
              </div>
            </article>
          </div>
        </section>
        <aside>
          <div class="sticky-side-bar">
            <footer>
              <div class="article-action-items">
                <div class="article-item">
                  <ss-save-user-content
                    ng-if="$root.$currentUser && vm.article"
                    ss-display-type="button"
                    ss-is-user-namespace="vm.isUserNamespace"
                    ss-item="vm.article"
                    ss-resource="vm.userResource"
                    ss-plural-resource-name="vm.pluralResourceName">
                  </ss-save-user-content>
                  <button ng-click="vm.openRegisterModal('articles')" ng-if="!$root.$currentUser">Save to My Articles</button>
                </div>
                <div class="article-item-border">
                  <a ui-sref=".article-share" class="article-share">Share <span class="icon-share"></span></a>
                </div>
              </div>
            </footer>
            <ss-square-ad adslot="aarp-ad-300x250" ng-if="$root.showLargeScreenAd()"></ss-square-ad>
          </div>
        </aside>
      </div>
    </div>
  </div>
</div>
<div class="article">
  <div class="container">
    <section>
      <ss-reviews ss-review-resource="vm.reviewResource" ss-resource='vm.resource'>
        <p>Did you find this article useful?</p>
      </ss-reviews>
    </section>
  </div>
</div>

<ss-related-content ss-resource="vm.article" ss-resource-name="Article">
</ss-related-content>

<footer class="mobile-fixed-footer">
  <div class="article-action-items">
    <span class="article-item left">
      <ss-save-user-content
        ng-if="$root.$currentUser && vm.article"
        ss-display-type="button"
        ss-is-user-namespace="vm.isUserNamespace"
        ss-item="vm.article"
        ss-resource="vm.userResource"
        ss-plural-resource-name="vm.pluralResourceName">
      </ss-save-user-content>
      <button ng-click="vm.openRegisterModal('articles')" ng-if="!$root.$currentUser">Save to My Articles</button>
    </span>
    <span class="article-item right">
      <a ui-sref=".article-share" class="article-share">Share <span class="icon-share"></span></a>
    </span>
  </div>
</footer>
