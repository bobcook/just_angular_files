<div
  ng-style="{'background-image':'url(' + vm.mastHeadImage + ')'}"
  class="cp-lead-in-detail">

  <section class="container">
    <div class="info-block">
      <header>
        <h5>{{vm.topLeft}}</h5>
        <span ng-if="vm.topRight">{{vm.topRight}}</span>
      </header>
      <article>
        <h2 class="ellipsis">
          {{vm.mastHeadTitle}}
        </h2>
      </article>
      <div class="pillars" ss-pillars-display="vm.pillars"></div>
    </div>
    <footer>
      <div class="effort"><span>{{vm.lowerLeft}}</span></div>
      <div class="action-items">
        <ss-save-user-content
          ng-if="vm.activity"
          ss-display-type="button"
          ss-display-content="vm.saveButtonDisplayContent"
          ss-is-user-namespace="vm.isUserNamespace"
          ss-item="vm.activity"
          ss-resource="vm.userResource"
          ss-is-saved="vm.isSaved"
          ss-plural-resource-name="vm.pluralResourceName"
          ss-saved-item="vm.savedItem">
        </ss-save-user-content>
      </div>
    </footer>
  </section>
</div>

<div
  ng-if="!vm.savedItem"
  class="cp-content-detail">

  <section class="container">
    <article>
      <div class="detail-text" ng-bind-html="vm.section1Body" ></div>
      <div ng-if="vm.benefitsToBrainHealth">
        <h4>Benefits to Brain Health</h4>
        <div class="detail-text" ng-bind-html="vm.benefitsToBrainHealth"></div>
      </div>
      <hr>
      <div ng-if="vm.sourceMaterialsCitation">
        <h4>Want to dig a little deeper on this topic?</h4>
        <div class="detail-source" ng-bind-html="vm.sourceMaterialsCitation"></div>
      </div>
      <a href="" onclick="window.print()">Print <span class="icon-print"></span></a>
      <hr>
    </article>
  </section>
</div>

<div
  ng-if="vm.savedItem"
  class="cp-content-drawer">

  <section class="container">
    <a class="toggle-content-link" ng-click="vm.isContentDrawerOpen = !vm.isContentDrawerOpen">
      <span ng-if="!vm.isContentDrawerOpen" class="change-text">Show Activity Details<span class="caret caret-down"></span></span>
      <span ng-if="vm.isContentDrawerOpen" class="change-text">Hide Activity Details<span class="caret caret-up"></span></span>
    </a>
    <article ss-content-drawer="vm.isContentDrawerOpen" ss-drawer-class="">
      <ss-activity-tracker
        ss-is-saved="vm.isSaved"
        activity="vm.savedItem">
      </ss-activity-tracker>
    </article>
    <hr>
  </section>
</div>

<div class="cp-content-group">
  <section class="container">
    <header>
      <h3>{{vm.contentTitle}}</h3>
      <span class="effort">{{vm.contentSubtitle}}</span>
      <hr>
    </header>
    <article ng-repeat="(subheader, article) in vm.content">
      <h3 ng-if="subheader">{{subheader}}</h3>
      <p ng-bind-html="article"></p>
    </article>
    <footer>
      <hr>
      <h4>Interested in working on this activity?</h4>
      <!-- TODO side effects on saving activity, i.e. activity trackers -->
      <ss-save-user-content
        ng-if="vm.activity"
        ss-display-type="button"
        ss-display-content="vm.saveButtonDisplayContent"
        ss-is-user-namespace="vm.isUserNamespace"
        ss-item="vm.activity"
        ss-resource="vm.userResource"
        ss-is-saved="vm.isSaved"
        ss-plural-resource-name="vm.pluralResourceName"
        ss-saved-item="vm.savedItem">
      </ss-save-user-content>
    </footer>
  </section>
</div>

<div class="cp-print-button">
  <section class="container">
    <a href="" onclick="window.print()">Print <span class="icon-print"></span></a>
  </section>
</div>

<ss-reviews
  ss-review-resource="vm.reviewResource"
  ss-resource='vm.resource'>
  <p>Did you find this activity useful?</p>
</ss-reviews>

<!-- TODO: turn back on
<ss-related-content
  ss-resource="vm.activity">
</ss-related-content>
-->
